<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
  <body>

  <th:block th:fragment="renderTeaser(identifiable, language)">
    <div class="row">
      <div class="col-sm-2">
        <figure th:with="previewImage=${identifiable.previewImage}">
          <th:block th:if="${previewImage}" th:with="hints=${identifiable.previewImageRenderingHints}">
            <th:block th:if="${hints != null && hints.targetLink != null}">
              <a th:href="${hints.targetLink}" th:target="${hints.isOpenLinkInNewWindow()}? '_blank'">
            </th:block>
            <th:block th:if="${previewImage.iiifBaseUrl}">
              <img th:src="${previewImage.iiifBaseUrl} + '/full/100,/0/default.jpg'"
                   th:alt="${hints != null && hints.altText != null}? ${hints.altText.getText(language)} : ${previewImage.filename}"
                   th:title="${hints != null && hints.title != null}? ${hints.title.getText(language)}"
                   />
            </th:block>
            <th:block th:unless="${previewImage.iiifBaseUrl}">
              <img th:src="${previewImage.uri}"
                   th:alt="${hints != null && hints.altText != null}? ${hints.altText.getText(language)} : ${previewImage.filename}"
                   th:title="${hints != null && hints.title != null}? ${hints.title.getText(language)}"
                   style="width: 100px;" />
            </th:block>
            <th:block th:if="${hints != null && hints.targetLink != null}">
              </a>
            </th:block>
            <th:block th:if="${hints != null && hints.caption != null}">
              <figcaption th:text="${hints.caption.getText(language)}">image caption</figcaption>
            </th:block>
          </th:block>
          <th:block th:unless="${previewImage}">
            <img alt="no preview" class="media-object" th:src="@{/images/no-image.png}" style="width: 100px;" />
          </th:block>
        </figure>
      </div>
      <div class="col-sm-10">
        <label class="font-weight-bold">
          <th:block th:insert="cudami/fragments/localizedtext::renderLocalizedText(${identifiable.label}, ${language})"></th:block>
        </label>
        <th:block th:if="${identifiable.description} and ${identifiable.description.containsKey(language)}">
          <div th:insert="cudami/fragments/structuredcontent::renderLocalizedStructuredContent(${identifiable.description}, ${language})"></div>
        </th:block>
      </div>
    </div>
  </th:block>

</body>
</html>
